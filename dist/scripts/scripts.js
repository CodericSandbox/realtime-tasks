"use strict";var CONFIG={clientId:"502747173299.apps.googleusercontent.com",scopes:["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.install"]},app={};app.module=angular.module("todos",[]),app.Todo=function(){},app.Todo.prototype.initialize=function(e){var t=gapi.drive.realtime.custom.getModel(this);this.title=t.createString(e),this.completed=!1,this.setup()},app.Todo.prototype.setup=function(){Object.defineProperty(this.title,"text",{set:this.title.setText,get:this.title.getText})},app.loadFile=function(e,t){var o=e.current.params.fileId,i=e.current.params.user;return t.requireAuth(!0,i).then(function(){return t.getDocument(o)})},app.loadFile.$inject=["$route","storage"],app.module.config(["$routeProvider",function(e){e.when("/todos/:fileId/:filter",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{realtimeDocument:app.loadFile}}).when("/create",{templateUrl:"views/loading.html",controller:"CreateCtrl"}).when("/install",{templateUrl:"views/install.html",controller:"InstallCtrl"}).otherwise({redirectTo:"/install"})}]),app.module.value("config",CONFIG),app.module.run(["$rootScope","$location","storage",function(e,t,o){e.$on("$routeChangeError",function(){t.url("/install?target="+encodeURIComponent(t.url()))}),e.$on("todos.token_refresh_required",function(){o.requireAuth(!0).then(function(){},function(){t.url("/install?target="+encodeURIComponent(t.url()))})})}]),gapi.load("auth:client:drive-share:drive-realtime",function(){gapi.auth.init(),app.Todo.prototype.title=gapi.drive.realtime.custom.collaborativeField("title"),app.Todo.prototype.completed=gapi.drive.realtime.custom.collaborativeField("completed"),gapi.drive.realtime.custom.registerType(app.Todo,"todo"),gapi.drive.realtime.custom.setInitializer(app.Todo,app.Todo.prototype.initialize),gapi.drive.realtime.custom.setOnLoaded(app.Todo,app.Todo.prototype.setup),$(document).ready(function(){angular.bootstrap(document,["todos"])})});